<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>创作中心</title>
    <link rel="stylesheet" href="css/upload/upload_main.css">
    <link rel="stylesheet" href="css/main/header.css">
    <script src="js/jquery-3.4.1.js"></script>

    <script>
        $(function () {
            var imgCount = 5;
            var index = 1;
            var intervalId;
            var buttonSpan = $('.trig')[0].children; //htmlCollection 集合
            //自动轮播功能 使用定时器
            autoNextPage();


            function autoNextPage() {
                intervalId = setInterval(function() {
                    nextPage(true);
                }, 3000);
            }
            //当鼠标移入 停止轮播
            $('.panel').hover(function() {
                console.log('hah');
                clearInterval(intervalId);
            }, function() { // 当鼠标移出，开始轮播
                autoNextPage();
            });



            //小圆点的相应功能 事件委托
            clickButtons();

            function clickButtons() {
                var length = buttonSpan.length;
                for(var i = 0; i < length; i++) {
                    buttonSpan[i].onclick = function() {
                        $(buttonSpan[index - 1]).removeClass('on');
                        if($(this).attr('index') == 1) {
                            index = 5;
                        } else {
                            index = $(this).attr('index') - 1;
                        }
                        nextPage(true);
                    };
                }
            }

            function nextPage(next) {
                var targetLeft = 0;
                //当前的圆点去掉on样式
                $(buttonSpan[index - 1]).removeClass('on');
                if(next) { //往后走
                    if(index == 5) { //到最后一张，直接跳到第一张
                        targetLeft = 0;
                        index = 1;
                    } else {
                        index++;
                        targetLeft = -620 * (index - 1);
                    }

                } else { //往前走
                    if(index == 1) { //在第一张，直接跳到第五张
                        index = 5;
                        targetLeft = -620 * (imgCount - 1);
                    } else {
                        index--;
                        targetLeft = -620 * (index - 1);
                    }

                }
                $('.carousel-module .panel .pic').animate({
                    left: targetLeft + 'px'
                });
                //更新后的圆点加上样式
                $(buttonSpan[index - 1]).addClass('on');

            }
        })
    </script>
</head>
<body>
    <div class="cc-body">
        <div class="home-wrap">
            <div class="home-wrap cc-content-body">
                <div class="row1">
                    <div class="chief-recommend-module report-scroll-module clearfix card">
                        <div class="carousel-box"style="width: 620px">
                            <div class="more_wrap">
                                <div class="more_wrap__bg"></div>
                                <a>更多活动</a>
                            </div>
                            <div id="scroll" class="carousel-module">
                                <div class="panel">
                                    <ul id="ul" class="pic" style="width: 500%;">
                                        <li class=" scrollx off ">
                                            <img src="images/upload/lunbo5.png"  />
                                            <a class="more-text" style="z-index: 200;">更多</a>
                                        </li>
                                        <li class="scrollx off ">
                                            <img src="images/upload/lunbo1.jpg"  />
                                            <a class="more-text" style="z-index: 200;">更多</a>
                                        </li>
                                        <li class="scrollx off ">
                                            <img src="images/upload/lunbo2.jpg"  />
                                            <a class="more-text" style="z-index: 200;">更多</a>
                                        </li>
                                        <li class="scrollx off ">
                                            <img src="images/upload/lunbo3.png"  />
                                            <a class="more-text" style="z-index: 200;">更多</a>
                                        </li>
                                        <li class="scrollx off ">
                                            <img src="images/upload/lunbo4.jpg"  />
                                            <a class="more-text" style="z-index: 200;">更多</a>
                                        </li>
                                    </ul>

                                    <ul class="trig ">
                                        <span index="1" class="on"></span>
                                        <span index="2" class=""></span>
                                        <span index="3" class=""></span>
                                        <span index="4" class=""></span>
                                        <span index="5" class=""></span>
                                    </ul>

                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                <div class="high-wrapper funcDialog">
                    <div class="high-wrapper__body">

                    </div>
                </div>
                <div class="row2">
                    <div class="data-card card">
                        <div class="data-wrp">
                            <div class="tab clearfix"style="width: 100%;">
                                <div class="videoFirst fl">
                                    <a class="data-tab current">视频数据</a>
                                </div>
                            </div>
                            <div class="section video clearfix">
                                <div class="section-item vedio fl">
                                    <div class="data-name">
                                        播放总量
                                    </div>
                                    <div class="text-content">
                                        <span>5</span>
                                    </div>
                                    <div class="diff-wrp">
                                        <span class="improve">昨日增量</span>
                                        <span class="no-improve"></span>
                                    </div>
                                </div>
                                <div class="section-item vedio fl">
                                    <div class="data-name">
                                        播放总量
                                    </div>
                                    <div class="text-content">
                                        <span>5</span>
                                    </div>
                                    <div class="diff-wrp">
                                        <span class="improve">昨日增量</span>
                                        <span class="no-improve"></span>
                                    </div>
                                </div>
                                <div class="section-item vedio fl">
                                    <div class="data-name">
                                        播放总量
                                    </div>
                                    <div class="text-content">
                                        <span>5</span>
                                    </div>
                                    <div class="diff-wrp">
                                        <span class="improve">昨日增量</span>
                                        <span class="no-improve"></span>
                                    </div>
                                </div>
                                <div class="section-item vedio fl">
                                    <div class="data-name">
                                        播放总量
                                    </div>
                                    <div class="text-content">
                                        <span>5</span>
                                    </div>
                                    <div class="diff-wrp">
                                        <span class="improve">昨日增量</span>
                                        <span class="no-improve"></span>
                                    </div>
                                </div>
                                <div class="section-item vedio fl">
                                    <div class="data-name">
                                        播放总量
                                    </div>
                                    <div class="text-content">
                                        <span>5</span>
                                    </div>
                                    <div class="diff-wrp">
                                        <span class="improve">昨日增量</span>
                                        <span class="no-improve"></span>
                                    </div>
                                </div>
                                <div class="section-item vedio fl">
                                    <div class="data-name">
                                        播放总量
                                    </div>
                                    <div class="text-content">
                                        <span>5</span>
                                    </div>
                                    <div class="diff-wrp">
                                        <span class="improve">昨日增量</span>
                                        <span class="no-improve"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>